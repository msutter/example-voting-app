kind: Module
description: Results UI service
type: container
name: result
services:
  - name: result
    env:
      POSTGRESQL_HOST: postgres
      POSTGRESQL_USERNAME: vote
      POSTGRESQL_PASSWORD: 1234
      POSTGRESQL_DATABASE: vote
    annotations:
      app.openshift.io/connects-to: redis, postgres
    dependencies:
      - postgres
    ingresses:
      - path: /
        port: http
        hostname: result-${var.environment}.${var.domain}
    ports:
      - name: http
        containerPort: 8080
tests:
  - name: integ
    args: [echo, ok]
    dependencies:
      - postgres