allow_k8s_contexts('vote-tilt/api-crc-testing:6443/kube:admin')
# Deploy: tell Tilt what YAML to deploy
# k8s_yaml('app.yaml')

k8s_yaml(helm('charts/voting'))

# Build: tell Tilt what images to build from which directories
docker_build('msutter/examplevotingapp_vote', './vote')
docker_build('msutter/examplevotingapp_result', './result')
docker_build('msutter/examplevotingapp_worker', './worker')

# Watch: tell Tilt how to connect locally (optional)
k8s_resource('release-name-voting-vote', port_forwards=31000)
k8s_resource('release-name-voting-result', port_forwards=31001)